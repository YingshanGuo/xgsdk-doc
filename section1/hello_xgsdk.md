# Hello西瓜


### 欢迎来到 XGSDK ，让我们一起开始西瓜的使用之旅！

西瓜 SDK 为游戏商提供一套完整的 SDK 接入方案，一次性解决游戏 SDK 接入问题，整个接入过程不会改变、影响任何 SDK 的功能、参数等，整个过程对于最终玩家而言是透明的。
游戏商只需专注于游戏不必为接入时渠道间的差异而苦恼，将这些烦恼都交给我们来解决。西瓜 SDK 包括了渠道 SDK 、支付系统、数据统计等等。
游戏商可以根据自身游戏的技术架构选择对应的 SDK 版本，并参考相应的接入指南。

### 快速接入
按照下面10个步骤，即可完成 SDK 的接入，帮助游戏上架。
（提示：步骤4,5,6,7可并行）
<ol>
<li><a href="#1">注册账号</a></li>
<li><a href="#2">创建游戏</a></li>
<li><a href="#3">创建发布计划</a></li>
<li><a href="#4">SDK接入</a></li>
<li><a href="#5">配置渠道参数</a></li>
<li><a href="#6">配置充值回调地址</a></li>
<li><a href="#7">使用打包工具打包</a></li>
<li><a href="#8">上传游戏图标资源</a></li>
<li><a href="#9">提交渠道包</a></li>
<li><a href="#10">上架确认</a></li>
</ol>

<a id="1"></a>

### 1. 注册账号

1.1 进入西瓜 SDK 官网首页（<a href="http://console.xgsdk.com/login">http://console.xgsdk.com/login</a>），注册账号并进行登录后可创建新游戏

<img src="./img/kystep1.png">  

1.2 在输入框中填入对应信息，点击免费注册即可

<img src="./img/kystep2.png">  

1.3 注册成功输入用户名、密码，进入如下页面即注册成功

<img src="./img/step3.png">  



<a id="2"></a>

### 2. 创建游戏

2.1 点击“创建”游戏

<img src="./img/newgame0.png" >  

2.2 输入游戏名称、选择游戏平台、上传游戏图标（可选项），点击确认即可

<img src="./img/newgame.png">  

2.3 创建游戏成功  



<a id="3"></a>

### 3. 发布计划

3.1 为游戏创建发布计划，可以更好的跟进游戏的接入完成进度，避免影响上架时间，点击“新增计划”开始创建一个新的发布计划

<img src="./img/111.png">

3.2   输入计划中对应的上线日期（游戏上架时间）、计划名称（如删档内测版、不删档公测版等）、发布渠道（选择游戏上线渠道，至少要选择一个渠道），在选择渠道时可以选择所需的渠道SDK版本（默认版本是当前所支持的最新版本，如图中红框所示），点击创建完成创建发布计划

<img src="./img/333.png">  

3.3 创建好的发布计划如下：

<img src="./img/444.png">  

发布计划中的5步代表含义：
- 第1步——配置渠道参数：需要将申请到的渠道参数配置到西瓜potal（配置渠道参数详细过程请参考** <a href="#5"> 5配置渠道参数</a> ** ）
- 第2步——验证渠道参数：接入西瓜SDK并用西瓜的打包工具生成DEMO包后，进行参数的验证（参数验证详细过程请参考** <a href="#5"> 5.5渠道参数验证</a> ** ）  
- 第3步——上传图标资源：如果渠道要求有角标，则需要上传指定格式的角标资源；若无角标要求，即可忽略此步
- 第4步——渠道包就绪：利用打包工具打出渠道包，打包完成后在打包工具中点击“就绪”即可点亮（仅代表一个打包完成状态）  
- 第5步——成功上架确认：渠道包通过渠道审核后手动点亮发布计划中的“成功上架”（此步只是一个状态表示，亮灭均不会影响游戏上架）  
注意：虽然完成渠道参数配置后，就可以进行打包，但是西瓜强烈建议您进行渠道参数验证和根据渠道要求上传图标资源。






<a id="4"></a>

### 4. SDK接入

4.1  选择菜单栏中“开发接入 SDK ，在弹出窗口选择游戏引擎类型、屏幕样式

<img src="./img/step9.png">  

4.2  将西瓜接入参数配置到游戏中
- 新游戏如何获取接入参数：创建一个新游戏就可以获得西瓜分给游戏的接入参数：产品代码、服务端密钥、客户端密钥
- 已创建的游戏如何获取接入参数：如果游戏已创建完成，则可以点击"开发接入SDK"查看分配给游戏的接入参数，具体如下：
-
<img src="./img/step10.png">

4.3  进行SDK接入  
   - 点击下载"客户西瓜 SDK 包"
   - 参考<a href="../section2/README.md">客户端接入指南</a>和<a href="../section3/README.md">服务端接入指南</a>进行接入(客户端接入指南包括: cocos2d-x 引擎接入指南、unity3d 引擎接入指南、原生接口接入指南；服务端指南包括：session 验证、支付通知、数据上报)  

4.4  配置测试环境充值回调地址（游戏测试时使用的充值回调地址）  

4.5  接口接入校验  
西瓜SDK接入校验主要通过在线检验，现说明如下：  
在线校验主要通过游戏接入**测试渠道**来实现：当游戏接入测试渠道后，可在西瓜 SDK 官网 portal 上所提供的西瓜 SDK 接入校验功能板块中观察检验结果，共有三种状态：
- 未调用状态：如图所示
-
<img src="./img/jiaoyan_5.png">

- 调用成功状态：当游戏正确按照接入文档接入指定接口（例如login），并且触发login之后，可在西瓜SDK接入验证平台portal上观察到login按钮的调用状态如下图
-
<img src="./img/jiaoyan3.png">

- 调用失败状态：如果游戏已经正确接入指定接口，但是由于参数配置不正确等情况，在西瓜SDK接入验证平台portal上可观察到调用异常，会有来自西瓜SDK的提示如图
-
<img src="./img/jiaoyan2.png">

**注意：**

1. 西瓜SDK在线检验只是验证游戏是否成功调用相应接口，例如：如果pay接口被激活并不代表充值一定到账，仅代表游戏成功接入西瓜SDK的pay接口。

2. 游戏只需要激活其想接入的接口即可出包，并不需要激活所有接口，例如：只接入login接口，则无需在意其他接口的状态。

3. 此接口验证步骤是非必须的，但是西瓜强烈建议对接入的接口进行检验。




<a id="5"></a>

### 5. 配置渠道参数

5.1 此处配置的渠道参数为开发者在渠道申请得到的应用参数，渠道参数的具体申请步骤请参考<a href="../section4/README.md">参数申请指南</a>获取相应渠道的渠道参数，也可直接点击“配置指南”  

5.2 将获取到的渠道参数填入对应渠道的参数表中  

5.3 去渠道后台配置游戏充值回调地址（可直接点击“去渠道后台配置”进行跳转），其中充值回调地址是渠道服务器通知西瓜SDK服务器支付订单信息的地址  

5.4 点击保存

<img src="./img/step11.png">

5.5 渠道参数配置好后，进行参数验证（此步骤并不是必须的，但是建议对参数进行验证）：利用西瓜提供的打包工具生成demo包进行渠道参数的验证，即实现如下三点：
1. 能够正常登陆；
2. 所有渠道所支持的充值方式均能成功调起即弹出充值页面；
3. 选择一种充值方式充值到账。



<a id="6"></a>

### 6. 配置充值回调地址

6.1 全局充值回调地址，即正式环境充值回调地址，此地址是游戏服务器接收订单支付信息的接口地址（此处只能填一个地址）

<img src="./img/step12.png">

6.2 渠道充值回调地址，游戏方可能会对不同的渠道有不同的充值回调地址，如图

<img src="./img/step13.png">

**注意：** 当渠道充值回调地址输入框中有地址时，优先取此地址；若渠道充值回调地址为空时，取全局充值回调地址即正式环境充值回调地址。

6.3  配置完成后点击保存





<a id="7"></a>


### 7. 使用打包工具进行打包

7.1 西瓜提供三种版本的打包工具，分别为：Mac OSX 64位版本、windows 64位版本、Linux 64位版本，请选择相应版本的打包工具进行下载

<img src="./img/dabaogongju1.png">

7.2 参考** <a href="./xg_dabao.md">打包工具使用指南</a> ** 进行打包工具的安装及使用  

7.3 **备注：** 西瓜提供的打包工具可以打出两种类型的包：参数 demo 包和渠道包  
- 参数 demo 包：通过登录、充值可以对渠道参数的正确性进行验证
- 渠道包：是最终提交给渠道的 APK 包



<a id="8"></a>


### 8. 上传图标资源

8.1 如果渠道有图标要求（详情查看** <a href="../section4/icon.html#jiaobiao">渠道图标要求</a>** ）请游戏上传图标资源。首先下载渠道相对应的角标、闪屏素材和制作要求，再参考** <a href="../section4/icon.md">角标制作规范</a>** 制作符合渠道要求的游戏图标资源进行上传

<img src="./img/step14.png">

8.2 图标资源完成上传后进行提交




<a id="9"></a>


### 9. 提交渠道包

提交给渠道之前的建议：
- 需要通过渠道参数验证，具体验证办法是通过打包工具生成 Demo 包来进行参数验证（参数验证详细过程请参考** <a href="#5"> 5.5渠道参数验证</a> ** ）
- 渠道包经过渠道自检规范验证，如果渠道没有提供自检文档，请按照西瓜提供的通用自检文档进行验证（渠道自检规范请参考** <a href="../section4/anzhi.md">渠道自检规范</a> ** ）

将通过测试的渠道包提交给对应的渠道进行审核。渠道审核的周期一般为1-3天。



<a id="10"></a>


### 10. 上架确认

渠道包审核通过后，在发布计划中点亮“上架完成”的进度条。
